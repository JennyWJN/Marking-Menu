<!DOCTYPE html>
<html>

<head>
  <link href="../marking-menu.css" rel="stylesheet">
  <style>
    body,
    html,
    #main {
      padding: 0;
      margin: 0;
      height: 100%;
    }

    #toast-wrapper {
      position: fixed;
      top: 50px;
      width: 100%;
      text-align: center;
    }

    #toast {
      background-color: rgba(0, 0, 0, .8);
      color: white;
      font-weight: bolder;
      border-radius: 5px;
      padding: 10px 20px;
      opacity: 0;
      transition: 400ms;
    }

    #toast.shown {
      opacity: 1;
    }
  </style>
</head>

<body>
  <div id="main"></div>
  <div id="toast-wrapper">
    <span id="toast"></span>
  </div>

  <script src="./Rx.min.js"></script>
  <script src="../marking-menu.js"></script>
  <script>
    // Create the toast.
    const toastMessage = (dom => {
      let timeoutId = null;
      return function (message) {
        clearTimeout(timeoutId);
        dom.innerHTML = message;
        dom.classList.add('shown');
        timeoutId = setTimeout(() => {
          dom.classList.remove('shown');
        }, 1000);
      }
    })(document.getElementById('toast'));

    // Create the marking menu.
    const mm = (function (dom) {
      const leafs = Array.from({ length: 7 })
        .map((_, i) => ({ name: `item ${i + 1}` }));
      const items = [
        ...leafs.slice(0, 2),
        {
          name: 'others...',
          children: Array.from({ length: 4 })
            .map((_, i) => ({ name: `item ${i + 8}` }))
        },
        ...leafs.slice(2)
      ];
      return MarkingMenu(items, main);
    })(document.getElementById('main'))

    // Toast the marking menu's selections.
    mm.subscribe(selection => toastMessage(selection.name));
  </script>
</body>

</html>